"use strict";var _createClass=function(){function n(o,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}return function(o,i,t){return i&&n(o.prototype,i),t&&n(o,t),o}}();function _classCallCheck(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function magnifier(){var n=$(".bigimg-p"),e=$(".mask"),s=$(".pro-img img");s.width("1100px"),s.height("1080px");var a=s.height()/e.height(),r=s.width()/e.width();e.hover(function(){$(".pro-img").show()},function(){$(".pro-img").hide(),n.css({top:0,left:0})}),e.mousemove(function(o){var i=o.pageX-$(this).offset().left-n.width()/2,t=o.pageY-$(this).offset().top-n.height()/2;n.css({left:Math.min(Math.max(0,i),e.width()-n.width()),top:Math.min(Math.max(0,t),e.height()-n.height())}),s.css({left:-n.position().left*r,top:-n.position().top*a})})}function addcar(){$(".sum-add").click(function(){var o=$("#sum").val();99<=++o&&(o=99),$("#sum").val(o)}),$(".sum-down").click(function(){var o=$("#sum").val();--o<=1&&(o=1),$("#sum").val(o)}),$(".sum-btn").click(function(){var o=$.cookie("goodsinfo"),t=$(".goodstit").attr("data-id"),i=$("#sum").val();if(o){var n=JSON.parse(o);if(n.some(function(o,i){return o.goodsid==t})){for(var e=0;e<n.length;e++)if(n[e].goodsid==t){var s=Number(n[e].goodsnum)+parseInt(i);n[e]={goodsid:t,goodsnum:s},$.cookie("goodsinfo",JSON.stringify(n));break}}else n.push({goodsid:t,goodsnum:i}),$.cookie("goodsinfo",JSON.stringify(n))}else{var a=[];a[a.length]={goodsid:t,goodsnum:i},$.cookie("goodsinfo",JSON.stringify(a),{expires:7})}alert("加入成功")})}require(["../js/config.js"],function(){require(["jquery","comment","cookie","template"],function(d,o,i,a){new(function(){function i(o){_classCallCheck(this,i),this.url=o.url,this.load()}return _createClass(i,[{key:"load",value:function(){var i=this;d.ajax({url:this.url,success:function(o){console.log(o),i.data=o,i.display(),i.Magnifier()}})}},{key:"display",value:function(){for(var o=d.cookie("goodsid"),i=0;this.data.length;i++)if(this.data[i].id==o){var t=i,n=this.data[t],e=a("detailone",{list:n});d(".one-l").append(e);var s=a("detailtwo",{list:n});d(".main-content").append(s);break}this.addEvent()}},{key:"addEvent",value:function(){var o=this;d(".sum-add").click(function(){var o=d("#sum").val();99<=++o&&(o=99),d("#sum").val(o)}),d(".sum-down").click(function(){var o=d("#sum").val();--o<=1&&(o=1),d("#sum").val(o)}),d(".sum-btn").click(function(){o.setCookie()})}},{key:"setCookie",value:function(){var t=d(".goodstit").attr("data-id"),n=d("#sum").val();if(this.goodinfo=JSON.parse(d.cookie("goodsinfo"))||[],this.goodinfo.length<1)this.goodinfo.push({goodsid:t,goodsnum:n});else{var e=this,s=!0;d.each(this.goodinfo,function(o,i){i.goodsid==t&&(e.goodinfo[o].goodsnum=parseInt(e.goodinfo[o].goodsnum)+parseInt(n),s=!1)}),console.log(e.goodinfo),s&&this.goodinfo.push({goodsid:t,goodsnum:n})}d.cookie("goodsinfo",JSON.stringify(this.goodinfo))}},{key:"Magnifier",value:function(){var n=d(".bigimg-p"),e=d(".mask"),s=d(".pro-img img");s.width("1100px"),s.height("1080px");var a=s.height()/e.height(),r=s.width()/e.width();e.hover(function(){d(".pro-img").show()},function(){d(".pro-img").hide(),n.css({top:0,left:0})}),e.mousemove(function(o){var i=o.pageX-d(this).offset().left-n.width()/2,t=o.pageY-d(this).offset().top-n.height()/2;n.css({left:Math.min(Math.max(0,i),e.width()-n.width()),top:Math.min(Math.max(0,t),e.height()-n.height())}),s.css({left:-n.position().left*r,top:-n.position().top*a})})}}]),i}())({url:"../js/json/cjpl.json"})})});